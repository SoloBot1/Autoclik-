-- Lotus Hub Script for Roblox Mobile
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- Configuration
local Config = {
    Aimbot = {
        Enabled = false,
        Hold = false,
        Mode = "Head",
        Target = "Closest",
        Smoothness = 0.1,
        LockButton = "MouseButton2",
        Checks = {
            WallCheck = true,
            TeamCheck = true
        },
        Prediction = 0.1,
        StickyAim = true,
        FOV = {
            Enabled = true,
            Visible = true,
            Size = 80,
            Lock = 13
        }
    },
    ESP = {
        Enabled = false,
        Boxes = true,
        Names = true,
        Distance = true
    },
    Visuals = {
        Enabled = false
    }
}

-- GUI Creation
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LotusHub"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Quick Toggle Button
local quickToggle = Instance.new("TextButton")
quickToggle.Size = UDim2.new(0, 60, 0, 60)
quickToggle.Position = UDim2.new(1, -70, 0.5, -30)
quickToggle.AnchorPoint = Vector2.new(0, 0.5)
quickToggle.BackgroundColor3 = Color3.fromRGB(147, 112, 219)
quickToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
quickToggle.Text = "AIM"
quickToggle.Font = Enum.Font.GothamBold
quickToggle.TextSize = 14
quickToggle.ZIndex = 10
quickToggle.Parent = screenGui

local quickCorner = Instance.new("UICorner")
quickCorner.CornerRadius = UDim.new(0, 30)
quickCorner.Parent = quickToggle

local quickStroke = Instance.new("UIStroke")
quickStroke.Color = Color3.fromRGB(255, 255, 255)
quickStroke.Thickness = 2
quickStroke.Parent = quickToggle

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 350, 0, 450)
mainFrame.Position = UDim2.new(0.5, -175, 0.5, -225)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

local mainStroke = Instance.new("UIStroke")
mainStroke.Color = Color3.fromRGB(147, 112, 219)
mainStroke.Thickness = 2
mainStroke.Parent = mainFrame

-- Header
local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, 50)
header.Position = UDim2.new(0, 0, 0, 0)
header.BackgroundColor3 = Color3.fromRGB(147, 112, 219)
header.BorderSizePixel = 0
header.Parent = mainFrame

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 12)
headerCorner.Parent = header

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 1, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Text = "LOTUS HUB"
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.Parent = header

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -35, 0.5, -15)
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 14
closeBtn.Parent = header

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 15)
closeCorner.Parent = closeBtn

-- Tab Buttons
local tabContainer = Instance.new("Frame")
tabContainer.Size = UDim2.new(1, -20, 0, 40)
tabContainer.Position = UDim2.new(0, 10, 0, 60)
tabContainer.BackgroundTransparency = 1
tabContainer.Parent = mainFrame

local tabs = {"Aimbot", "Visuals", "Settings"}
local tabButtons = {}

for i, tabName in pairs(tabs) do
    local tabBtn = Instance.new("TextButton")
    tabBtn.Size = UDim2.new(0.32, 0, 1, 0)
    tabBtn.Position = UDim2.new((i-1) * 0.32, 0, 0, 0)
    tabBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    tabBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
    tabBtn.Text = tabName
    tabBtn.Font = Enum.Font.Gotham
    tabBtn.TextSize = 14
    tabBtn.Parent = tabContainer
    
    local tabCorner = Instance.new("UICorner")
    tabCorner.CornerRadius = UDim.new(0, 8)
    tabCorner.Parent = tabBtn
    
    tabButtons[tabName] = tabBtn
end

-- Content Frame
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, -20, 1, -120)
contentFrame.Position = UDim2.new(0, 10, 0, 110)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

local contentScrolling = Instance.new("ScrollingFrame")
contentScrolling.Size = UDim2.new(1, 0, 1, 0)
contentScrolling.BackgroundTransparency = 1
contentScrolling.ScrollBarThickness = 4
contentScrolling.Parent = contentFrame

-- Toggle Button Function
local function CreateToggle(name, config, yPosition, parent)
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Size = UDim2.new(1, 0, 0, 40)
    toggleFrame.Position = UDim2.new(0, 0, 0, yPosition)
    toggleFrame.BackgroundTransparency = 1
    toggleFrame.Parent = parent
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.7, 0, 1, 0)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Text = name
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = toggleFrame
    
    local toggleBg = Instance.new("Frame")
    toggleBg.Size = UDim2.new(0, 50, 0, 24)
    toggleBg.Position = UDim2.new(1, -50, 0.5, -12)
    toggleBg.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    toggleBg.Parent = toggleFrame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 12)
    toggleCorner.Parent = toggleBg
    
    local toggleDot = Instance.new("Frame")
    toggleDot.Size = UDim2.new(0, 20, 0, 20)
    toggleDot.Position = UDim2.new(0, 2, 0, 2)
    toggleDot.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    toggleDot.Parent = toggleBg
    
    local dotCorner = Instance.new("UICorner")
    dotCorner.CornerRadius = UDim.new(0, 10)
    dotCorner.Parent = toggleDot
    
    local function UpdateToggle()
        if config then
            toggleDot.Position = UDim2.new(0, 28, 0, 2)
            toggleBg.BackgroundColor3 = Color3.fromRGB(147, 112, 219)
        else
            toggleDot.Position = UDim2.new(0, 2, 0, 2)
            toggleBg.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
        end
    end
    
    toggleBg.MouseButton1Click:Connect(function()
        config = not config
        UpdateToggle()
    end)
    
    UpdateToggle()
    return toggleFrame
end

-- Slider Function
local function CreateSlider(name, config, min, max, yPosition, parent)
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Size = UDim2.new(1, 0, 0, 60)
    sliderFrame.Position = UDim2.new(0, 0, 0, yPosition)
    sliderFrame.BackgroundTransparency = 1
    sliderFrame.Parent = parent
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 20)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Text = name .. ": " .. tostring(config)
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = sliderFrame
    
    local sliderBg = Instance.new("Frame")
    sliderBg.Size = UDim2.new(1, 0, 0, 20)
    sliderBg.Position = UDim2.new(0, 0, 0, 30)
    sliderBg.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    sliderBg.Parent = sliderFrame
    
    local sliderCorner = Instance.new("UICorner")
    sliderCorner.CornerRadius = UDim.new(0, 10)
    sliderCorner.Parent = sliderBg
    
    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((config - min) / (max - min), 0, 1, 0)
    sliderFill.BackgroundColor3 = Color3.fromRGB(147, 112, 219)
    sliderFill.Parent = sliderBg
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 10)
    fillCorner.Parent = sliderFill
    
    local dragging = false
    
    local function UpdateSlider(input)
        local pos = UDim2.new(
            math.clamp((input.Position.X - sliderBg.AbsolutePosition.X) / sliderBg.AbsoluteSize.X, 0, 1), 
            0, 1, 0
        )
        sliderFill.Size = pos
        
        local value = math.floor(min + (pos.X.Scale * (max - min)))
        config = value
        label.Text = name .. ": " .. tostring(value)
    end
    
    sliderBg.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            UpdateSlider(input)
        end
    end)
    
    sliderBg.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
            UpdateSlider(input)
        end
    end)
    
    sliderBg.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    return sliderFrame
end

-- Create Tab Contents
local tabContents = {}

-- Aimbot Tab
local aimbotContent = Instance.new("Frame")
aimbotContent.Size = UDim2.new(1, 0, 0, 400)
aimbotContent.BackgroundTransparency = 1
aimbotContent.Visible = true
aimbotContent.Parent = contentScrolling

local yOffset = 0
CreateToggle("Enable Aimbot", Config.Aimbot.Enabled, yOffset, aimbotContent)
yOffset = yOffset + 45

CreateToggle("Hold Mode", Config.Aimbot.Hold, yOffset, aimbotContent)
yOffset = yOffset + 45

CreateToggle("Wall Check", Config.Aimbot.Checks.WallCheck, yOffset, aimbotContent)
yOffset = yOffset + 45

CreateToggle("Team Check", Config.Aimbot.Checks.TeamCheck, yOffset, aimbotContent)
yOffset = yOffset + 45

CreateToggle("Prediction", Config.Aimbot.Prediction > 0, yOffset, aimbotContent)
yOffset = yOffset + 45

CreateToggle("Sticky Aim", Config.Aimbot.StickyAim, yOffset, aimbotContent)
yOffset = yOffset + 45

CreateToggle("FOV Visible", Config.Aimbot.FOV.Visible, yOffset, aimbotContent)
yOffset = yOffset + 45

CreateSlider("Smoothness", Config.Aimbot.Smoothness, 0.1, 1, yOffset, aimbotContent)
yOffset = yOffset + 70

CreateSlider("FOV Size", Config.Aimbot.FOV.Size, 10, 200, yOffset, aimbotContent)
yOffset = yOffset + 70

CreateSlider("Lock Distance", Config.Aimbot.FOV.Lock, 1, 50, yOffset, aimbotContent)
yOffset = yOffset + 70

tabContents["Aimbot"] = aimbotContent

-- Visuals Tab
local visualsContent = Instance.new("Frame")
visualsContent.Size = UDim2.new(1, 0, 0, 200)
visualsContent.BackgroundTransparency = 1
visualsContent.Visible = false
visualsContent.Parent = contentScrolling

local visOffset = 0
CreateToggle("Enable ESP", Config.ESP.Enabled, visOffset, visualsContent)
visOffset = visOffset + 45

CreateToggle("Show Boxes", Config.ESP.Boxes, visOffset, visualsContent)
visOffset = visOffset + 45

CreateToggle("Show Names", Config.ESP.Names, visOffset, visualsContent)
visOffset = visOffset + 45

CreateToggle("Show Distance", Config.ESP.Distance, visOffset, visualsContent)
visOffset = visOffset + 45

tabContents["Visuals"] = visualsContent

-- Settings Tab
local settingsContent = Instance.new("Frame")
settingsContent.Size = UDim2.new(1, 0, 0, 100)
settingsContent.BackgroundTransparency = 1
settingsContent.Visible = false
settingsContent.Parent = contentScrolling

tabContents["Settings"] = settingsContent

-- Update scrolling content size
contentScrolling.CanvasSize = UDim2.new(0, 0, 0, yOffset + 10)

-- Tab Switching
local function SwitchTab(tabName)
    for name, content in pairs(tabContents) do
        content.Visible = (name == tabName)
    end
    
    for name, btn in pairs(tabButtons) do
        if name == tabName then
            btn.BackgroundColor3 = Color3.fromRGB(147, 112, 219)
            btn.TextColor3 = Color3.fromRGB(255, 255, 255)
        else
            btn.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
            btn.TextColor3 = Color3.fromRGB(200, 200, 200)
        end
    end
end

for tabName, btn in pairs(tabButtons) do
    btn.MouseButton1Click:Connect(function()
        SwitchTab(tabName)
    end)
end

-- Aimbot Functions
local function GetClosestPlayer()
    local closestPlayer = nil
    local closestDistance = Config.Aimbot.FOV.Size
    
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= player and otherPlayer.Character then
            local humanoid = otherPlayer.Character:FindFirstChild("Humanoid")
            if humanoid and humanoid.Health > 0 then
                
                -- Team check
                if Config.Aimbot.Checks.TeamCheck and otherPlayer.Team == player.Team then
                    continue
                end
                
                -- Wall check
                if Config.Aimbot.Checks.WallCheck then
                    local character = player.Character
                    local targetChar = otherPlayer.Character
                    if character and targetChar then
                        local head = character:FindFirstChild("Head")
                        local targetHead = targetChar:FindFirstChild("Head")
                        if head and targetHead then
                            local ray = Ray.new(head.Position, (targetHead.Position - head.Position).Unit * 100)
                            local part, _ = workspace:FindPartOnRayWithIgnoreList(ray, {character, targetChar})
                            if part then continue end
                        end
                    end
                end
                
                local humanoidRootPart = otherPlayer.Character:FindFirstChild("HumanoidRootPart")
                if humanoidRootPart then
                    local screenPoint, onScreen = workspace.CurrentCamera:WorldToViewportPoint(humanoidRootPart.Position)
                    
                    if onScreen then
                        local distance = (Vector2.new(screenPoint.X, screenPoint.Y) - Vector2.new(mouse.X, mouse.Y)).Magnitude
                        
                        if distance < closestDistance then
                            closestDistance = distance
                            closestPlayer = otherPlayer
                        end
                    end
                end
            end
        end
    end
    
    return closestPlayer
end

-- FOV Circle
local fovCircle = Instance.new("Frame")
fovCircle.Size = UDim2.new(0, Config.Aimbot.FOV.Size * 2, 0, Config.Aimbot.FOV.Size * 2)
fovCircle.Position = UDim2.new(0.5, -Config.Aimbot.FOV.Size, 0.5, -Config.Aimbot.FOV.Size)
fovCircle.BackgroundColor3 = Color3.fromRGB(147, 112, 219)
fovCircle.BackgroundTransparency = 0.8
fovCircle.BorderSizePixel = 0
fovCircle.Visible = Config.Aimbot.FOV.Visible
fovCircle.ZIndex = 5
fovCircle.Parent = screenGui

local fovCorner = Instance.new("UICorner")
fovCorner.CornerRadius = UDim.new(1, 0)
fovCorner.Parent = fovCircle

local fovStroke = Instance.new("UIStroke")
fovStroke.Color = Color3.fromRGB(255, 255, 255)
fovStroke.Thickness = 2
fovStroke.Parent = fovCircle

-- Aimbot Loop
local aimbotConnection
local function StartAimbot()
    if aimbotConnection then
        aimbotConnection:Disconnect()
    end
    
    aimbotConnection = RunService.RenderStepped:Connect(function()
        -- Update FOV Circle
        fovCircle.Visible = Config.Aimbot.FOV.Visible
        fovCircle.Size = UDim2.new(0, Config.Aimbot.FOV.Size * 2, 0, Config.Aimbot.FOV.Size * 2)
        fovCircle.Position = UDim2.new(0.5, -Config.Aimbot.FOV.Size, 0.5, -Config.Aimbot.FOV.Size)
        
        if Config.Aimbot.Enabled then
            local aimbotActive = true
            if Config.Aimbot.Hold then
                aimbotActive = UserInputService:IsMouseButtonPressed(Enum.UserInputType[Config.Aimbot.LockButton])
            end
            
            if aimbotActive then
                local targetPlayer = GetClosestPlayer()
                if targetPlayer and targetPlayer.Character then
                    local targetPart = targetPlayer.Character:FindFirstChild(Config.Aimbot.Mode == "Head" and "Head" or "HumanoidRootPart")
                    if targetPart then
                        local camera = workspace.CurrentCamera
                        local targetPosition = targetPart.Position
                        
                        -- Prediction
                        if Config.Aimbot.Prediction > 0 then
                            local targetVelocity = targetPart.Velocity
                            targetPosition = targetPosition + (targetVelocity * Config.Aimbot.Prediction)
                        end
                        
                        -- Smooth aiming
                        local currentCamera = camera.CFrame
                        local targetCamera = CFrame.lookAt(currentCamera.Position, targetPosition)
                        local smoothed = currentCamera:Lerp(targetCamera, 1 - Config.Aimbot.Smoothness)
                        
                        camera.CFrame = smoothed
                    end
                end
            end
        end
    end)
end

-- UI Controls
quickToggle.MouseButton1Click:Connect(function()
    Config.Aimbot.Enabled = not Config.Aimbot.Enabled
    if Config.Aimbot.Enabled then
        quickToggle.BackgroundColor3 = Color3.fromRGB(50, 200, 100)
        quickToggle.Text = "AIM ON"
    else
        quickToggle.BackgroundColor3 = Color3.fromRGB(147, 112, 219)
        quickToggle.Text = "AIM"
    end
end)

local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0, 50, 0, 50)
toggleBtn.Position = UDim2.new(0, 10, 0, 10)
toggleBtn.BackgroundColor3 = Color3.fromRGB(147, 112, 219)
toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleBtn.Text = "☰"
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 18
toggleBtn.Parent = screenGui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 25)
toggleCorner.Parent = toggleBtn

local toggleStroke = Instance.new("UIStroke")
toggleStroke.Color = Color3.fromRGB(255, 255, 255)
toggleStroke.Thickness = 2
toggleStroke.Parent = toggleBtn

toggleBtn.MouseButton1Click:Connect(function()
    mainFrame.Visible = not mainFrame.Visible
end)

closeBtn.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
end)

-- Initialize
SwitchTab("Aimbot")
StartAimbot()

print("Lotus Hub loaded successfully!")
